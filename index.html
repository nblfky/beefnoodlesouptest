<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>bnsVision</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#00b14f">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="bnsVision">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Splash Screen -->
  <div id="splashScreen" class="splash-screen active">
    <div class="splash-content">
      <img src="bns_logo.png" alt="beefnoodlesoup logo" class="splash-logo">
      <div class="splash-brand">beefnoodlesoup</div>
      <div class="splash-tagline">where flavour meets function</div>
    </div>
  </div>

  <div id="appShell">
    <!-- Home Screen -->
    <section id="homeScreen" class="screen">
      <div class="home-hero">
        <div class="home-logo">
          <img src="bns_logo.png" alt="beefnoodlesoup logo">
        </div>
        <div class="home-brand">beefnoodlesoup</div>
        <p class="home-tagline">where flavour meets function</p>
      </div>
      <div class="home-options">
        <button id="visionEntry" class="home-option primary">
          <span class="option-title">Vision</span>
          <span class="option-subtitle">stirring data into discovery</span>
        </button>
        <button id="vanguardOption" class="home-option disabled" aria-disabled="true">
          <span class="option-title">Vanguard</span>
          <span class="option-subtitle">Coming soon...</span>
        </button>
      </div>
      <footer class="home-footer">
        <button id="versionHistoryBtn" class="link-btn" type="button">Version history</button>
        <span class="version-label">Version: <span id="appVersion">1.0.0</span></span>
      </footer>
    </section>

    <!-- Vision Menu Screen -->
    <section id="visionMenu" class="screen">
      <div class="vision-menu-header">
        <button id="homeBackBtn" class="icon-btn" title="Back to home">‚üµ</button>
        <div class="vision-menu-title">
          <h1>beefnoodlesoup<span class="vision-suffix">Vision</span></h1>
        </div>
      </div>
      <div class="vision-menu-grid">
        <button class="vision-menu-tile" data-vision-target="data">
          <div class="tile-icon">üìã</div>
          <span>Records</span>
        </button>
        <button class="vision-menu-tile" data-vision-target="batch">
          <div class="tile-icon">üì§</div>
          <span>Batch Upload</span>
        </button>
        <button class="vision-menu-tile" data-vision-target="map">
          <div class="tile-icon">üó∫Ô∏è</div>
          <span>Map</span>
        </button>
        <button class="vision-menu-tile disabled" data-vision-target="guide">
          <div class="tile-icon">üìñ</div>
          <span>Guide</span>
        </button>
      </div>
      <div class="vision-scan-action">
        <button id="startScanningBtn" class="start-scanning-btn">
          <span class="scan-icon">üì∑</span>
          <span class="scan-text">Start Scanning</span>
        </button>
      </div>
    </section>

    <!-- Batch Upload Screen -->
    <section id="batchUploadScreen" class="screen">
      <div class="vision-app">
        <div class="vision-topbar">
          <button id="batchBackBtn" class="icon-btn" title="Back">‚üµ</button>
          <h2 class="view-title">Batch Upload</h2>
        </div>
        <section class="vision-view active">
          <div class="card">
            <div class="batch-upload-area">
              <button id="batchUploadBtn" class="btn">Select Images</button>
              <input type="file" id="batchImageInput" accept="image/*" multiple style="display:none" />
              <p class="upload-hint">Upload multiple storefront images at once</p>
            </div>
            <div id="batchStatus" class="muted"></div>
            <div class="table-container">
              <table id="batchResultsTable">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Photo</th>
                    <th>POI Name</th>
                    <th>Lat-Long</th>
                    <th>House_No</th>
                    <th>Street</th>
                    <th>Unit</th>
                    <th>Building</th>
                    <th>Postcode</th>
                    <th>Remarks</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <div class="toolbar">
              <button id="batchExportBtn" class="btn">Export</button>
              <button id="batchDownloadPhotosBtn" class="btn">Download Photos</button>
              <button id="batchClearBtn" class="btn">Clear</button>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- Vision App Screen -->
    <main id="visionApp" class="screen">
      <div class="vision-app">
        <div class="vision-topbar">
          <button id="visionMenuBackBtn" class="icon-btn" title="Back">‚üµ</button>
          <h2 class="view-title" id="currentViewTitle">Records</h2>
        </div>

        <section id="cameraView" class="vision-view" data-view="camera">
    <div class="video-wrapper">
      <video id="camera" autoplay playsinline></video>
      <div id="progressBar"><div id="progressFill"></div></div>
      <button id="scanBtn" class="scan-btn">Scan</button>
      
      <!-- Zoom Controls -->
      <div class="zoom-controls">
        <button id="zoomOut" class="zoom-btn" title="Zoom Out">‚àí</button>
        <div class="zoom-indicator">
          <span id="zoomLevel">1.0x</span>
        </div>
        <button id="zoomIn" class="zoom-btn" title="Zoom In">+</button>
        <button id="zoomReset" class="zoom-reset-btn" title="Reset Zoom">‚åÇ</button>
      </div>
      
      <div id="scanningOverlay" class="scanning-overlay">
        <div class="scanning-content">
          <div class="spinner"></div>
          <div class="scanning-text">Scanning...</div>
        </div>
      </div>
    </div>
        </section>

        <section id="dataView" class="vision-view active" data-view="data">
          <div class="card">
            <div class="toolbar">
              <button id="exportBtn" class="btn">Export</button>
              <button id="downloadAllPhotosBtn" class="btn">Download Photos</button>
            </div>
            <div class="search-toolbar">
              <input type="text" id="storeSearchInput" placeholder="Search for store name in table..." />
              <button id="searchLocationBtn" class="btn">üîç Search</button>
              <button id="clearBtn" class="btn">Clear</button>
            </div>
            <div id="status" class="muted"></div>
            <div class="table-container">
              <table id="resultsTable">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Photo</th>
                    <th>POI Name</th>
                    <th>Lat-Long</th>
                    <th>House_No</th>
                    <th>Street</th>
                    <th>Unit</th>
                    <th>Building</th>
                    <th>Postcode</th>
                    <th>Remarks</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="mapView" class="vision-view" data-view="map">
    <div id="mapContainer" class="map-container">
      <div class="map-header">
        <div class="map-info">
          <span id="mapStatus">üìç Loading location...</span>
          <button id="toggleMiniMapBtn" class="map-follow-btn" title="Minimize map">‚ñæ</button>
          <span id="routeProgress"></span>
        </div>
        <div class="map-header-buttons">
          <button id="followLocationBtn" class="map-follow-btn" title="Follow Location">üéØ</button>
          <button id="requestLocationBtn" class="map-location-btn" title="Request Location" style="display:none;">üìç</button>
          <button id="mapExpandBtn" class="map-expand-btn" title="Expand Map">‚õ∂</button>
        </div>
      </div>
      <div id="miniMap" class="mini-map"></div>
      
      <!-- Full Screen Map Overlay -->
      <div id="fullMapOverlay" class="full-map-overlay hidden">
        <div class="full-map-header">
          <h3>Route Planning</h3>
          <div class="map-controls">
            <button id="centerOnUserBtn" class="map-btn">üìç My Location</button>
            <button id="clearRouteBtn" class="map-btn">Clear Route</button>
            <button id="addRoutePointModeBtn" class="map-btn">Add Point</button>
            <button id="markerStyleBtn" class="map-btn" title="Cycle marker style">Marker: Cross</button>
            <button id="optimizeRouteBtn" class="map-btn">Optimize</button>
          </div>
          <button id="mapCloseBtn" class="map-close-btn">√ó</button>
        </div>
        <div id="fullMap" class="full-map"></div>
        <div class="map-footer">
          <div class="route-stats">
            <span id="routeDistance">Distance: 0 km</span>
            <span id="routeTime">Time: 0 min</span>
            <span id="routePoints">Points: 0</span>
          </div>
        </div>
      </div>
    </div>
        </section>
      </div>
    </main>
    </div>

  <!-- Leaflet.js for Maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Leaflet.Draw for map annotations -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
  <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
  
  <!-- OCR Library -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
  <!-- Spell correction library -->
  <script src="https://cdn.jsdelivr.net/npm/didyoumean2@3/dist/didyoumean2.min.js"></script>
  <!-- HEIC conversion library -->
  <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>

  <!-- App logic (ESM) -->
  <script type="module" src="script.js"></script>
</body>
</html> 